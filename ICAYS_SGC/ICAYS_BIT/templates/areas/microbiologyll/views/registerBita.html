{% extends 'template-inicio/base.html' %}
{% load static %}
{% block content %}
<div class="container-fluid">
    <form action="" method="get">
        <div class="d-flex flex-wrap justify-content-between align-items-center">
            <!-- Botón "Regresar" alineado a la izquierda -->
            <button class="icon-container button-style custom-button mb-2" type="button" data-url="{% url 'microbiologyll' %}">Regresar</button>
    
        
            <!-- Botones alineados a la derecha -->
            <div class="d-flex flex-wrap gap-2">
                <button class="enviar-custom custom-button" data-url="{% url 'microbiologyll' %}">Enviar</button>
                <button class="cancelar-custom custom-button" data-url="{% url 'microbiologyll' %}" type="button">Cancelar</button>
                <button class="guardar-custom custom-button" data-url="{% url 'microbiologyll' %}">Guardar</button>
            </div>
        </div>
        
        <div class="d-flex align-items-center p-3">
            <!-- Contenedor de botones alineado a la izquierda -->
            <div class="d-flex gap-3">
                <!-- Botón para ocultar/mostrar contenido -->
                <button class="btn btn-primary" id="toggleFormulario" type="button">
                    <i class="bi bi-arrow-down-circle"></i>
                </button>                
                <!-- Botón para agregar filas -->
                <button id="add-row-btn" class="btn btn-success" type="button">
                    <i class="bi bi-plus-circle"></i>
                </button>        
                <!-- Botón para eliminar filas -->
                <button id="remove-row-btn" class="btn btn-danger" type="button">
                    <i class="bi bi-dash-circle"></i>
                </button>
            </div>
        
            <!-- Título centrado -->
            <h1 class="text-center flex-grow-1 m-0">Cuenta de bacterias aerobias en placa</h1>
        </div>            
        
               
        <div id="contenidoOculto" class="oculto"> 
            <div class="card card-body">
                <!-- Formulario -->
                <div class="row mb-4" >
                    <div class="col-12">
                        <div class="row g-1 mb-2"> <!-- Reducir el espacio entre filas -->
                            <!-- Fecha, Hora, Procedimiento y Equipo de incubación -->
                            <div class="col-12 col-md-6 col-lg-3">
                                <div class="form-floating">
                                    <input type="date" class="form-control form-control-sm" id="floatingInput" placeholder="Fecha" style="font-size: 12px;">
                                    <label for="floatingInput" style="font-size: 12px;">Fecha de siembra</label>
                                </div>
                            </div>
                            <div class="col-12 col-md-6 col-lg-3">
                                <div class="form-floating">
                                    <input type="time" class="form-control form-control-sm" id="floatingSiembra" placeholder="Hora" style="font-size: 12px;">
                                    <label for="floatingSiembra" style="font-size: 12px;">Hora de siembra</label>
                                </div>
                            </div>
                            <div class="col-12 col-md-6 col-lg-3">
                                <div class="form-floating">
                                    <input type="text" class="form-control form-control-sm" id="Procedimiento" placeholder="LAI-04M2" value="LAI-04M2" readonly style="font-size: 12px;">
                                    <label for="Procedimiento" style="font-size: 12px;">Procedimiento</label>
                                </div>
                            </div>
                            <div class="col-12 col-md-6 col-lg-3">
                                <div class="form-floating">
                                    <input type="text" class="form-control form-control-sm" id="Incubacion" placeholder="LAT-63 (35C°)" value="LAT-63 (35C°)" readonly style="font-size: 12px;">
                                    <label for="Incubacion" style="font-size: 12px;">Equipo de incubación</label>
                                </div>
                            </div>
                        </div>
            
                        <!-- Título "Registro de muestras LAF-50" -->
                        <div class="row mb-2"> <!-- Reducir el margen inferior -->
                            <div class="col-12 text-center">
                                <h3 class="h6" style="font-size: 14px;">Registro de muestras LAF-50</h3>
                            </div>
                        </div>
            
                        <!-- Letra Analista, Tomo y Página -->
                        <div class="row g-1 mb-2"> <!-- Reducir el espacio entre filas -->
                            <div class="col-12 col-md-4">
                                <div class="form-floating">
                                    <input type="text" class="form-control form-control-sm" id="LA" placeholder="Hora" style="font-size: 12px;">
                                    <label for="LA" style="font-size: 12px;">Letra Analista</label>
                                </div>
                            </div>
                            <div class="col-12 col-md-4">
                                <div class="form-floating">
                                    <input type="text" class="form-control form-control-sm" id="Tomo" placeholder="Hora" style="font-size: 12px;">
                                    <label for="Tomo" style="font-size: 12px;">Tomo</label>
                                </div>
                            </div>
                            <div class="col-12 col-md-4">
                                <div class="form-floating">
                                    <input type="text" class="form-control form-control-sm" id="Pagina" placeholder="Hora" style="font-size: 12px;">
                                    <label for="Pagina" style="font-size: 12px;">Página</label>
                                </div>
                            </div>
                        </div>
            
                        <!-- Título "Reactivos y medios de cultivo LAF-02" -->
                        <div class="row mb-2"> <!-- Reducir el margen inferior -->
                            <div class="col-12 text-center">
                                <h3 class="h6" style="font-size: 14px;">Reactivos y medios de cultivo LAF-02</h3>
                            </div>
                        </div>
            
                        <!-- Solución reguladora de fosfato -->
                        <div class="row g-1 mb-2"> <!-- Reducir el espacio entre filas -->
                            <div class="col-12 col-md-6">
                                <div class="text-center">
                                    <h3 class="h6" style="font-size: 14px;">Solución reguladora de fosfato</h3>
                                </div>
                            </div>
                            <div class="col-12 col-md-3">
                                <div class="form-floating">
                                    <input type="text" class="form-control form-control-sm" id="floatingPassword" placeholder="Hora" style="font-size: 12px;">
                                    <label for="floatingPassword" style="font-size: 12px;">Página</label>
                                </div>
                            </div>
                            <div class="col-12 col-md-3">
                                <div class="form-floating">
                                    <input type="text" class="form-control form-control-sm" id="floatingPassword" placeholder="Hora" style="font-size: 12px;">
                                    <label for="floatingPassword" style="font-size: 12px;">Número</label>
                                </div>
                            </div>
                        </div>
            
                        <!-- Agar para métodos estándar -->
                        <div class="row g-1 mb-2"> <!-- Reducir el espacio entre filas -->
                            <div class="col-12 col-md-6">
                                <div class="text-center">
                                    <h3 class="h6" style="font-size: 14px;">Agar para métodos estándar</h3>
                                </div>
                            </div>
                            <div class="col-12 col-md-3">
                                <div class="form-floating">
                                    <input type="text" class="form-control form-control-sm" id="floatingPassword" placeholder="Hora" style="font-size: 12px;">
                                    <label for="floatingPassword" style="font-size: 12px;">Página</label>
                                </div>
                            </div>
                            <div class="col-12 col-md-3">
                                <div class="form-floating">
                                    <input type="text" class="form-control form-control-sm" id="floatingPassword" placeholder="Hora" style="font-size: 12px;">
                                    <label for="floatingPassword" style="font-size: 12px;">Número</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            
                <!-- Tabla 1: Verificación de la balanza -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="table-responsive"> <!-- Contenedor responsivo para la tabla -->
                            <div class="row g-2 mb-2">
                                <div class="col-12 col-md-6 col-lg-3 text-center">
                                    <h3 class="h6 mb-0" style="font-size: 10px;">Verificación de la balanza granática LAM-12</h3>
                                </div>
                                <div class="col-12 col-md-6 col-lg-3 text-center">
                                    <h3 class="h6 mb-0" style="font-size: 10px;">Ver verificación mensual de la balanza en: LAF-02</h3>
                                </div>
                                <div class="col-12 col-md-6 col-lg-3">
                                    <div class="input-group input-group-sm">
                                        <span class="input-group-text" style="font-size: 10px;">Página</span>
                                        <input type="text" class="form-control form-control-sm" style="font-size: 10px;">
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 col-lg-3">
                                    <div class="input-group input-group-sm">
                                        <span class="input-group-text" style="font-size: 10px;">Número</span>
                                        <input type="text" class="form-control form-control-sm" style="font-size: 10px;">
                                    </div>
                                </div>
                            </div>
                            <table class="micro-table table-sm" style="font-size: 10px;">
                                <thead>
                                    <tr>
                                        <th style="font-size: 10px;">Hora</th>
                                        <th style="font-size: 10px;">Actividad</th>
                                        <th style="font-size: 10px;">Ajuste de balanza</th>
                                        <th style="font-size: 10px;">Valor nominal</th>
                                        <th style="font-size: 10px;">Valor convencional</th>
                                        <th style="font-size: 10px;">Valor obtenido de la masa</th>
                                        <th style="font-size: 10px;">Diferencia absoluta</th>
                                        <th style="font-size: 10px;">Incertidumbre aceptada</th>
                                        <th style="font-size: 10px;">EMT</th>
                                        <th style="font-size: 10px;">Criterio de aceptación</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><input type="time" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                    </tr>
                                    <tr>
                                        <td><input type="time" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            
                                    <!-- Tabla 2: Cumplimientos de calidad -->
                    <div class="row mb-4">
                        <div class="col-12 text-center">
                            <div class="table-responsive"> <!-- Contenedor responsivo para la tabla -->
                                <div class="row g-2 mb-2">
                                    <div class="col-12 col-md-4 col-lg-2 text-center">
                                        <h3 class="h6 mb-0" style="font-size: 12px;">Hora de incubación</h3>
                                    </div>
                                    <div class="col-12 col-md-4 col-lg-2">
                                        <div class="input-group input-group-sm">
                                            <span class="input-group-text" style="font-size: 10px;">🕒</span>
                                            <input type="time" class="form-control form-control-sm" style="font-size: 10px;">
                                        </div>
                                    </div>
                                </div>
                                <table class="micro-table table-sm" style="font-size: 12px;">
                                    <caption style="caption-side: top; text-align: center; font-size: 12px; font-weight: bold; padding: 5px; background-color: #063970; color: white;">
                                        Ver cumplimiento de controles de calidad en:
                                    </caption>
                                    <thead>
                                        <tr>
                                            <th style="font-size: 12px;">Bitácora/Tomo</th>
                                            <th style="font-size: 12px;">Página</th>
                                            <th style="font-size: 12px;">Bitácora/Tomo</th>
                                            <th style="font-size: 12px;">Página</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <div class="input-group input-group-sm">
                                                    <span class="input-group-text" style="font-size: 10px;">LAF-45/</span>
                                                    <input type="text" class="form-control form-control-sm" style="font-size: 10px;">
                                                </div>
                                            </td>
                                            <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                            <td>
                                                <div class="input-group input-group-sm">
                                                    <span class="input-group-text" style="font-size: 10px;">LAF-44/</span>
                                                    <input type="text" class="form-control form-control-sm" style="font-size: 10px;">
                                                </div>
                                            </td>
                                            <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="input-group input-group-sm">
                                                    <span class="input-group-text" style="font-size: 10px;">LAF-57/</span>
                                                    <input type="text" class="form-control form-control-sm" style="font-size: 10px;">
                                                </div>
                                            </td>
                                            <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                            <td>
                                                <div class="input-group input-group-sm">
                                                    <span class="input-group-text" style="font-size: 10px;">LAF-52/</span>
                                                    <input type="text" class="form-control form-control-sm" style="font-size: 10px;">
                                                </div>
                                            </td>
                                            <td><input type="text" class="form-control form-control-sm" style="font-size: 10px;"></td>
                                        </tr>
                                        <tr>
                                            <td colspan="4" class="text-center">
                                                <strong style="font-size: 12px;">LAF-45: Bitácora de control de calidad de microbiología, LAF-44: Bitácora de control de medio ambiente, LAF-57: Bitácora de bacterias aerobias en placa, LAF-52: Bitácora de mohos y levaduras</strong>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div class="row g-2 mt-2">
                                    <div class="col-6 col-md-3 col-lg-2 text-center">
                                        <h3 class="h6 mb-0" style="font-size: 12px;">Fecha y hora de las lecturas</h3>
                                    </div>
                                    <div class="col-6 col-md-3 col-lg-2">
                                        <div class="input-group input-group-sm">
                                            <span class="input-group-text" style="font-size: 10px;">🕒</span>
                                            <input type="date" class="form-control form-control-sm" style="font-size: 10px;">
                                        </div>
                                    </div>
                                    <div class="col-6 col-md-3 col-lg-2">
                                        <div class="input-group input-group-sm">
                                            <span class="input-group-text" style="font-size: 10px;">🕒</span>
                                            <input type="time" class="form-control form-control-sm" style="font-size: 10px;">
                                        </div>
                                    </div>
                                    <div class="col-6 col-md-3 col-lg-2">
                                        <div class="input-group input-group-sm">
                                            <span class="input-group-text" style="font-size: 10px;">🕒</span>
                                            <input type="date" class="form-control form-control-sm" style="font-size: 10px;">
                                        </div>
                                    </div>
                                    <div class="col-6 col-md-3 col-lg-2">
                                        <div class="input-group input-group-sm">
                                            <span class="input-group-text" style="font-size: 10px;">🕒</span>
                                            <input type="time" class="form-control form-control-sm" style="font-size: 10px;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
            </div>
        </div>
           
        <div class="table-container">
            
            <table class="micro-table">
                <caption style="caption-side: top; text-align: center; font-size: 1.5em; font-weight: bold; padding: 10px; background-color: #063970; color: white;">
                    Tabla de Resultados
                </caption>
                <thead>
                    <tr>
                        <th rowspan="2">Clave Muestra</th>
                        <th rowspan="2">Cantidad de muestra</th>
                        <th colspan="4">Diluciones empleadas</th>
                        <th colspan="2">Dilución o Directa</th>
                        <th rowspan="2">Promedio</th> <!-- Columna 4: Promedio -->
                        <th colspan="2">Dilución</th> <!-- Columnas 5 y 6 -->
                        <th rowspan="2">Promedio</th> <!-- Columna 7: Promedio entre Diluciones -->
                        <th colspan="2">Dilución</th> <!-- Columnas 8 y 9 -->
                        <th rowspan="2">Promedio</th> <!-- Columna 10: Promedio después de la segunda Dilución -->
                        <th colspan="2">Resultado</th> <!-- Columna 11: Subcolumnas sin título -->
                        <th rowspan="2">Diferencia entre duplicados <5%</th>
                    </tr>
                    <tr>
                        <!-- Subencabezados para diluciones empleadas -->
                        <th>10-1</th>
                        <th>10-2</th>
                        <th>10-3</th>
                        <th>10-4</th>
                        <!-- Subencabezados para Dilución o Directa -->
                        <th>Placa 1</th>
                        <th>Placa 2</th>
                        <!-- Subencabezados para Dilución (columnas 5 y 6) -->
                        <th>Placa 1</th>
                        <th>Placa 2</th>
                        <!-- Subencabezados para Dilución (columnas 8 y 9) -->
                        <th>Placa 1</th>
                        <th>Placa 2</th>
                    </tr>
                </thead>
                <tbody id="tabla-body">
                    <!-- Fila adicional debajo de los títulos -->
                    <tr>
                        <td><input type="text" value="Blanco" readonly></td> <!-- No editable -->
                        <td><input type="text" name="cantidad_blanco[]"></td>
                        <td><input type="text" name="dil1_blanco[]"></td>
                        <td><input type="text" name="dil2_blanco[]"></td>
                        <td><input type="text" name="dil3_blanco[]"></td>
                        <td><input type="text" name="dil4_blanco[]"></td>
                        <td><input type="text" name="dir_placa1_blanco[]"></td>
                        <td><input type="text" name="dir_placa2_blanco[]"></td>
                        <td><input type="text" name="promedio1_blanco[]"></td>
                        <td><input type="text" name="dil_placa1_blanco[]"></td>
                        <td><input type="text" name="dil_placa2_blanco[]"></td>
                        <td><input type="text" name="promedio2_blanco[]"></td>
                        <td><input type="text" name="dil_placa1_dup_blanco[]"></td>
                        <td><input type="text" name="dil_placa2_dup_blanco[]"></td>
                        <td><input type="text" name="promedio3_blanco[]"></td>
                        <!-- Subcolumnas de "Resultado" -->
                        <td><input type="text" name="resultado_blanco[]"></td> <!-- Editable -->
                        <td><input type="text" value="UFC/placa" readonly></td> <!-- No editable en "Blanco" -->
                        <td><input type="text" name="diferencia_blanco[]"></td>
                    </tr>
                    <!-- Fila principal de inputs -->
                    <tr>
                        <td><input type="text" name="clave[]"></td>
                        <td><input type="text" name="cantidad[]"></td>
                        <td><input type="text" name="dil1[]"></td>
                        <td><input type="text" name="dil2[]"></td>
                        <td><input type="text" name="dil3[]"></td>
                        <td><input type="text" name="dil4[]"></td>
                        <td><input type="text" name="dir_placa1[]"></td>
                        <td><input type="text" name="dir_placa2[]"></td>
                        <td><input type="text" name="promedio1[]"></td>
                        <td><input type="text" name="dil_placa1[]"></td>
                        <td><input type="text" name="dil_placa2[]"></td>
                        <td><input type="text" name="promedio2[]"></td>
                        <td><input type="text" name="dil_placa1_dup[]"></td>
                        <td><input type="text" name="dil_placa2_dup[]"></td>
                        <td><input type="text" name="promedio3[]"></td>
                        <!-- Subcolumnas de "Resultado" -->
                        <td><input type="text" name="resultado[]"></td> <!-- Editable -->
                        <td><input type="text" name="ufc_placa[]"></td> <!-- Editable -->
                        <td><input type="text" name="diferencia[]"></td>
                    </tr>
                    <!-- Se pueden agregar más filas de inputs si es necesario -->
                </tbody>
            </table>
            <div class="d-flex justify-content-center mt-4">
                <div class="w-50">
                    <table class="table-container text-center border">
                        <thead>
                            <tr>
                                <th>Elabora</th>
                                <th>Revisa</th>
                                <th>Autoriza</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div class="d-flex flex-column align-items-center">
                                        <span>{{ firma_elabora }}</span>
                                        <hr class="w-75 mt-4">
                                        <span>Firma</span>
                                    </div>
                                </td>
                                <td>
                                    <div class="d-flex flex-column align-items-center">
                                        <span>{{ firma_revisa }}</span>
                                        <hr class="w-75 mt-4">
                                        <span>Firma</span>
                                    </div>
                                </td>
                                <td>
                                    <div class="d-flex flex-column align-items-center">
                                        <span>{{ firma_autoriza }}</span>
                                        <hr class="w-75 mt-4">
                                        <span>Firma</span>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>        
        </div>
    </form>
</div>
{% endblock %}
